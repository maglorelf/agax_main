<!DOCTYPE html>
<html lang="gl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGAX - Test de Recursos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: #00AA66; font-weight: bold; }
        .error { color: #CC0000; font-weight: bold; }
        .info { color: #006699; }
        pre {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üîç AGAX - Test de Recursos</h1>
    
    <div class="test-section">
        <h2>1. CSS Test</h2>
        <p id="css-test">Testeando...</p>
    </div>
    
    <div class="test-section">
        <h2>2. JavaScript Test</h2>
        <p id="js-test">Testeando...</p>
    </div>
    
    <div class="test-section">
        <h2>3. Blogger API Test (CORS)</h2>
        <p id="api-test">Testeando...</p>
        <pre id="api-result"></pre>
    </div>
    
    <div class="test-section">
        <h2>4. Browser Info</h2>
        <p><strong>User Agent:</strong></p>
        <pre id="user-agent"></pre>
        <p><strong>Protocol:</strong> <span id="protocol"></span></p>
        <p><strong>Host:</strong> <span id="host"></span></p>
    </div>

    <link rel="stylesheet" href="styles.css">
    
    <script>
        // Test 1: CSS
        window.addEventListener('DOMContentLoaded', () => {
            const cssTest = document.getElementById('css-test');
            const computed = window.getComputedStyle(document.body);
            const fontFamily = computed.fontFamily;
            
            if (fontFamily) {
                cssTest.innerHTML = '<span class="success">‚úì CSS cargado correctamente</span>';
                cssTest.innerHTML += '<br><small>Font: ' + fontFamily + '</small>';
            } else {
                cssTest.innerHTML = '<span class="error">‚úó CSS no carg√≥</span>';
            }
        });
        
        // Test 2: JavaScript
        document.getElementById('js-test').innerHTML = '<span class="success">‚úì JavaScript funciona</span>';
        
        // Test 3: Blogger API
        function testBloggerAPI() {
            const apiTest = document.getElementById('api-test');
            const apiResult = document.getElementById('api-result');
            
            apiTest.innerHTML = '<span class="info">Testeando API de Blogger...</span>';
            
            const callbackName = 'testCallback' + Date.now();
            const url = `https://agaxnet.blogspot.com/feeds/posts/default?alt=json-in-script&max-results=1&callback=${callbackName}`;
            
            window[callbackName] = function(data) {
                delete window[callbackName];
                
                if (data && data.feed) {
                    apiTest.innerHTML = '<span class="success">‚úì Blogger API funciona (JSONP)</span>';
                    apiResult.textContent = 'Feed title: ' + (data.feed.title ? data.feed.title.$t : 'N/A');
                } else {
                    apiTest.innerHTML = '<span class="error">‚úó Respuesta inv√°lida</span>';
                    apiResult.textContent = JSON.stringify(data, null, 2);
                }
            };
            
            const script = document.createElement('script');
            script.src = url;
            script.onerror = () => {
                apiTest.innerHTML = '<span class="error">‚úó Error cargando Blogger API</span>';
                apiResult.textContent = 'No se pudo cargar el feed. Verifica CORS/Mixed Content.';
            };
            
            document.body.appendChild(script);
        }
        
        testBloggerAPI();
        
        // Test 4: Browser Info
        document.getElementById('user-agent').textContent = navigator.userAgent;
        document.getElementById('protocol').textContent = window.location.protocol;
        document.getElementById('host').textContent = window.location.host;
        
        // Check for mixed content
        if (window.location.protocol === 'https:') {
            const protocolEl = document.getElementById('protocol');
            protocolEl.innerHTML += ' <span class="success">‚úì HTTPS activo</span>';
        } else {
            const protocolEl = document.getElementById('protocol');
            protocolEl.innerHTML += ' <span class="info">HTTP (considere activar HTTPS)</span>';
        }
    </script>
</body>
</html>
